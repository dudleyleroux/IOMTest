<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Life in the Isle of Man – Knowledge Test</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fff;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 720px;
      width: 100%;
      overflow: hidden;
    }

    /* ── Header ── */
    .header {
      background: linear-gradient(90deg, #4C1D95, #5B21B6);
      color: #fff;
      padding: 28px 32px 20px;
      text-align: center;
    }
    .header .flag {
      font-size: 2.8rem;
      margin-bottom: 8px;
    }
    .header h1 {
      font-size: 1.45rem;
      font-weight: 700;
      letter-spacing: 0.5px;
    }
    .header p {
      font-size: 0.9rem;
      opacity: 0.85;
      margin-top: 4px;
    }

    /* ── Progress bar ── */
    .progress-wrap {
      background: #e9ecef;
      height: 8px;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #f7a800, #e8790a);
      width: 0%;
      transition: width 0.4s ease;
    }

    /* ── Question counter / score ── */
    .meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 28px 0;
      font-size: 0.85rem;
      color: #555;
    }
    .meta .score-live {
      font-weight: 600;
      color: #F97316;
    }

    /* ── Question card ── */
    .question-area {
      padding: 20px 28px 10px;
    }
    .question-text {
      font-size: 1.1rem;
      font-weight: 600;
      color: #4C1D95;
      line-height: 1.5;
      margin-bottom: 20px;
    }

    /* ── Options ── */
    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .option-btn {
      display: flex;
      align-items: center;
      gap: 12px;
      background: #f8f9fa;
      border: 2px solid #dee2e6;
      border-radius: 10px;
      padding: 13px 16px;
      cursor: pointer;
      font-size: 0.97rem;
      color: #333;
      text-align: left;
      transition: background 0.15s, border-color 0.15s, transform 0.1s;
      width: 100%;
    }
    .option-btn:hover:not(:disabled) {
      background: #EDE9FE;
      border-color: #5B21B6;
      transform: translateX(3px);
    }
    .option-btn .letter {
      flex-shrink: 0;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: #dee2e6;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.85rem;
      color: #555;
      transition: background 0.15s, color 0.15s;
    }
    .option-btn.correct {
      background: #d4edda;
      border-color: #28a745;
    }
    .option-btn.correct .letter {
      background: #28a745;
      color: #fff;
    }
    .option-btn.wrong {
      background: #f8d7da;
      border-color: #dc3545;
    }
    .option-btn.wrong .letter {
      background: #dc3545;
      color: #fff;
    }
    .option-btn:disabled {
      cursor: default;
    }

    /* ── Feedback ── */
    .feedback {
      min-height: 44px;
      margin: 14px 28px 0;
      padding: 10px 14px;
      border-radius: 8px;
      font-size: 0.92rem;
      font-weight: 500;
      display: none;
    }
    .feedback.correct {
      display: block;
      background: #d4edda;
      color: #155724;
      border-left: 4px solid #28a745;
    }
    .feedback.wrong {
      display: block;
      background: #f8d7da;
      color: #721c24;
      border-left: 4px solid #dc3545;
    }

    /* ── Navigation ── */
    .nav {
      padding: 16px 28px 24px;
      display: flex;
      justify-content: flex-end;
    }
    .btn-next {
      background: #F97316;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 11px 28px;
      font-size: 0.97rem;
      font-weight: 600;
      cursor: pointer;
      transition: opacity 0.2s, transform 0.1s;
      display: none;
    }
    .btn-next:hover { opacity: 0.88; transform: translateY(-1px); }

    /* ── Results screen ── */
    #results {
      display: none;
      padding: 32px 32px 36px;
      text-align: center;
    }
    #results h2 { font-size: 1.7rem; color: #4C1D95; margin-bottom: 8px; }
    .final-score {
      font-size: 3rem;
      font-weight: 800;
      color: #F97316;
      margin: 10px 0 4px;
    }
    .score-label { font-size: 1rem; color: #555; margin-bottom: 20px; }
    .grade-band {
      display: inline-block;
      padding: 8px 22px;
      border-radius: 20px;
      font-weight: 700;
      font-size: 1.1rem;
      margin-bottom: 22px;
    }
    .grade-distinction { background: #d4edda; color: #155724; }
    .grade-pass       { background: #fff3cd; color: #856404; }
    .grade-fail       { background: #f8d7da; color: #721c24; }

    .summary-grid {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-bottom: 28px;
      flex-wrap: wrap;
    }
    .summary-item {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 14px 20px;
      text-align: center;
      min-width: 100px;
    }
    .summary-item .num { font-size: 1.8rem; font-weight: 800; }
    .summary-item .lbl { font-size: 0.8rem; color: #666; margin-top: 2px; }
    .summary-item.green .num { color: #28a745; }
    .summary-item.red   .num { color: #dc3545; }

    .btn-restart {
      background: #F97316;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 13px 36px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: opacity 0.2s;
    }
    .btn-restart:hover { opacity: 0.88; }

    /* ── Start screen ── */
    #start-screen {
      padding: 36px 32px 40px;
      text-align: center;
    }
    #start-screen .flag { font-size: 3rem; margin-bottom: 14px; }
    #start-screen h2 { font-size: 1.5rem; color: #4C1D95; margin-bottom: 10px; }
    #start-screen p { color: #555; line-height: 1.6; max-width: 500px; margin: 0 auto 24px; }
    .start-info {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 28px;
      flex-wrap: wrap;
    }
    .info-chip {
      background: #EDE9FE;
      color: #4C1D95;
      border-radius: 20px;
      padding: 7px 16px;
      font-size: 0.88rem;
      font-weight: 600;
    }
    .btn-start {
      background: #F97316;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 14px 44px;
      font-size: 1.05rem;
      font-weight: 700;
      cursor: pointer;
      transition: opacity 0.2s, transform 0.1s;
    }
    .btn-start:hover { opacity: 0.88; transform: translateY(-2px); }

    @media (max-width: 480px) {
      .header { padding: 20px 18px 16px; }
      .question-area, .nav, .feedback { padding-left: 18px; padding-right: 18px; }
      .meta { padding: 12px 18px 0; }
      .question-text { font-size: 1rem; }
    }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>Life in the Isle of Man</h1>
    <p>Knowledge Test – 50 Questions</p>
  </div>
  <div class="progress-wrap"><div class="progress-bar" id="progress"></div></div>

  <!-- Start screen -->
  <div id="start-screen">
    <h2>Ready to begin?</h2>
    <p>This test covers the history, government, culture, law, and everyday life of the Isle of Man, based on the official guide for new residents.</p>
    <div class="start-info">
      <span class="info-chip">50 Questions</span>
      <span class="info-chip">4 Options each</span>
      <span class="info-chip">Instant feedback</span>
    </div>
    <button class="btn-start" onclick="startQuiz()">Start Test</button>
  </div>

  <!-- Quiz area -->
  <div id="quiz" style="display:none">
    <div class="meta">
      <span id="q-counter">Question 1 of 50</span>
      <span class="score-live">Score: <span id="score-live">0</span></span>
    </div>
    <div class="question-area">
      <div class="question-text" id="q-text"></div>
      <div class="options" id="options"></div>
    </div>
    <div class="feedback" id="feedback"></div>
    <div class="nav">
      <button class="btn-next" id="btn-next" onclick="nextQuestion()">Next →</button>
    </div>
  </div>

  <!-- Results -->
  <div id="results">
    <h2>Test Complete!</h2>
    <div class="final-score" id="final-score"></div>
    <div class="score-label">out of 50 questions</div>
    <div class="grade-band" id="grade-band"></div>
    <div class="summary-grid">
      <div class="summary-item green">
        <div class="num" id="res-correct">0</div>
        <div class="lbl">Correct</div>
      </div>
      <div class="summary-item red">
        <div class="num" id="res-wrong">0</div>
        <div class="lbl">Wrong</div>
      </div>
      <div class="summary-item">
        <div class="num" id="res-pct">0%</div>
        <div class="lbl">Percentage</div>
      </div>
    </div>
    <button class="btn-restart" onclick="restartQuiz()">Try Again</button>
  </div>
</div>

<script>
const ALL_QUESTIONS = [
  {
    q: "What is the total area of the Isle of Man?",
    options: ["327 sq km / 126 sq miles", "572 sq km / 227 sq miles", "672 sq km / 259 sq miles", "472 sq km / 182 sq miles"],
    answer: 1
  },
  {
    q: "What is the capital city of the Isle of Man?",
    options: ["Ramsey", "Castletown", "Douglas", "Peel"],
    answer: 2
  },
  {
    q: "How long is the Isle of Man from north to south?",
    options: ["33 kilometres (20 miles)", "43 kilometres (27 miles)", "53 kilometres (33 miles)", "63 kilometres (39 miles)"],
    answer: 2
  },
  {
    q: "What is the highest point on the Isle of Man?",
    options: ["Cronk ny Arrey Laa", "North Barrule", "Slieau Whallian", "Snaefell"],
    answer: 3
  },
  {
    q: "What is the height of Snaefell?",
    options: ["421 metres (1,381 feet)", "521 metres (1,709 feet)", "621 metres (2,036 feet)", "721 metres (2,365 feet)"],
    answer: 2
  },
  {
    q: "How many National Glens are there on the Isle of Man?",
    options: ["12", "15", "18", "21"],
    answer: 2
  },
  {
    q: "What percentage of the Isle of Man's land is used for agriculture?",
    options: ["Over 50%", "Over 60%", "Over 70%", "Over 80%"],
    answer: 2
  },
  {
    q: "In which year did UNESCO endorse the Isle of Man as a Biosphere?",
    options: ["2012", "2014", "2016", "2018"],
    answer: 2
  },
  {
    q: "Which unique sheep breed is found on the Isle of Man?",
    options: ["Soay sheep with 2 horns", "Loaghtan sheep with 4 horns", "Hebridean sheep with 4 horns", "Herdwick sheep with 2 horns"],
    answer: 1
  },
  {
    q: "How long have people lived on the Isle of Man?",
    options: ["Over 5,000 years", "Over 7,500 years", "Over 10,000 years", "Over 12,000 years"],
    answer: 2
  },
  {
    q: "What is the Manx name for the Isle of Man?",
    options: ["Mannin or Ellan Vannin", "Ellan Breeshey", "Gaelg Mannin", "Yn Cheshaght"],
    answer: 0
  },
  {
    q: "What does 'Balla' (or Balley) mean in Manx Gaelic?",
    options: ["Mountain", "River", "Homestead / farm", "Church"],
    answer: 2
  },
  {
    q: "What does '-by' mean in Norse, as found in Manx place names like Colby?",
    options: ["Valley", "Farm", "Sea", "Hill"],
    answer: 1
  },
  {
    q: "When did Viking influence begin on the Isle of Man?",
    options: ["7th century", "8th century", "9th century", "10th century"],
    answer: 2
  },
  {
    q: "In which year did Tynwald celebrate one thousand years of continuous existence?",
    options: ["1959", "1969", "1979", "1989"],
    answer: 2
  },
  {
    q: "What does 'Snaefell' mean in Norse?",
    options: ["High Peak", "Snow Mountain", "Misty Hill", "Cold Summit"],
    answer: 1
  },
  {
    q: "Under Norse rule, the Isle of Man became the centre of which kingdom?",
    options: ["Kingdom of the Isles", "Kingdom of Mann and the Isles", "Kingdom of the Irish Sea", "Kingdom of Scandinavia"],
    answer: 1
  },
  {
    q: "In what year did King Henry IV of England give the Isle of Man to Sir John Stanley?",
    options: ["1385", "1395", "1405", "1415"],
    answer: 2
  },
  {
    q: "In which year was the Act of Revestment, when the British Crown acquired the Island from the Duke of Atholl?",
    options: ["1745", "1755", "1765", "1775"],
    answer: 2
  },
  {
    q: "How many civilian internees of German origin were housed on the Island during World War 1?",
    options: ["15,000", "20,000", "25,000", "30,000"],
    answer: 2
  },
  {
    q: "What was the resident population of the Isle of Man according to the 2021 Census?",
    options: ["74,069", "84,069", "94,069", "64,069"],
    answer: 1
  },
  {
    q: "What percentage of the resident population was born outside of the Isle of Man, UK, and Republic of Ireland according to the 2021 Census?",
    options: ["6.3%", "8.3%", "10.3%", "12.3%"],
    answer: 2
  },
  {
    q: "What is the official language of the Isle of Man?",
    options: ["Manx Gaelic", "English", "Both equally", "Welsh"],
    answer: 1
  },
  {
    q: "What is the Manx Language Society called?",
    options: ["Comann na Gàidhlig", "Yn Cheshaght Ghailckagh", "Foras na Gaeilge", "Yr Urdd"],
    answer: 1
  },
  {
    q: "In what year did Ned Maddrell, the last traditional native Manx speaker, die?",
    options: ["1964", "1974", "1984", "1954"],
    answer: 1
  },
  {
    q: "At which primary school is the entire curriculum delivered through Manx Gaelic?",
    options: ["Douglas Grammar School", "Ballakermeen High School", "Bunscoill Ghaelgagh in St Johns", "QEII High School in Peel"],
    answer: 2
  },
  {
    q: "What is the Isle of Man's traditional symbol?",
    options: ["A Viking longship", "The Three Legs of Mann", "A Celtic cross", "The Laxey Wheel"],
    answer: 1
  },
  {
    q: "What is the translation of the Isle of Man's motto 'Quocunque Jeceris Stabit'?",
    options: ["Strong and Free", "Unity in Diversity", "Whichever way you throw me I will stand", "By Land and By Sea"],
    answer: 2
  },
  {
    q: "What is the Isle of Man's National Anthem?",
    options: ["Isle of Mann Forever", "O Land of Our Birth", "Sons of Mann", "Ellan Vannin"],
    answer: 1
  },
  {
    q: "On what date is Tynwald Day (the Manx National Day)?",
    options: ["5th June", "5th July", "5th August", "5th September"],
    answer: 1
  },
  {
    q: "Over how many miles does the world-famous TT motorcycle race mountain course run?",
    options: ["27.73 miles", "32.73 miles", "37.73 miles", "42.73 miles"],
    answer: 2
  },
  {
    q: "How long is the annual Parish Walk?",
    options: ["65 miles", "75 miles", "85 miles", "95 miles"],
    answer: 2
  },
  {
    q: "How many parish churches does the Parish Walk visit?",
    options: ["12", "15", "17", "19"],
    answer: 2
  },
  {
    q: "What is the Isle of Man's constitutional status?",
    options: ["An independent nation", "A Crown Dependency", "A British Overseas Territory", "Part of the United Kingdom"],
    answer: 1
  },
  {
    q: "Who is the Head of State of the Isle of Man?",
    options: ["The Prime Minister of the UK", "The Lieutenant Governor", "The Chief Minister", "His Majesty the King"],
    answer: 3
  },
  {
    q: "What is the King's official title in relation to the Isle of Man?",
    options: ["The Lord of Mann", "The Duke of Mann", "The Earl of Mann", "The Governor of Mann"],
    answer: 0
  },
  {
    q: "How often is a new Lieutenant Governor appointed?",
    options: ["Every 3 years", "Every 4 years", "Every 5 years", "Every 7 years"],
    answer: 2
  },
  {
    q: "How many Government Departments does the Isle of Man have?",
    options: ["6", "8", "10", "12"],
    answer: 1
  },
  {
    q: "How many Members does the House of Keys have?",
    options: ["20", "24", "28", "32"],
    answer: 1
  },
  {
    q: "How many constituencies does the House of Keys represent?",
    options: ["8", "10", "12", "14"],
    answer: 2
  },
  {
    q: "How many Members does the Legislative Council have?",
    options: ["9", "11", "13", "15"],
    answer: 1
  },
  {
    q: "What is the minimum voting age on the Isle of Man?",
    options: ["16", "17", "18", "21"],
    answer: 0
  },
  {
    q: "How long must you have lived on the Island before the 12th of May in an election year to be eligible to vote?",
    options: ["Six months", "Nine months", "Twelve months", "Two years"],
    answer: 2
  },
  {
    q: "How many Local Authorities are there on the Isle of Man?",
    options: ["17", "19", "21", "23"],
    answer: 2
  },
  {
    q: "What are elected members of local authorities on the Isle of Man typically called?",
    options: ["Councillors", "Commissioners", "Aldermen", "Representatives"],
    answer: 1
  },
  {
    q: "What is the name of the Isle of Man's publicly funded health service?",
    options: ["Manx Health Authority", "Manx Care", "Island Health Service", "Manx NHS"],
    answer: 1
  },
  {
    q: "Where is Noble's Hospital located?",
    options: ["Douglas town centre", "Ramsey", "Braddan, on the outskirts of Douglas", "Onchan"],
    answer: 2
  },
  {
    q: "How many primary schools are there on the Isle of Man?",
    options: ["22", "27", "32", "37"],
    answer: 2
  },
  {
    q: "At what age must children start full-time education on the Isle of Man?",
    options: ["In the term following their 4th birthday", "In the term following their 5th birthday", "In the term following their 6th birthday", "At age 7"],
    answer: 1
  },
  {
    q: "What is the name of the famous landmark at Laxey?",
    options: ["The Great Laxey Waterfall", "The Great Laxey Wheel", "The Great Laxey Mine", "The Great Laxey Castle"],
    answer: 1
  },
  {
    q: "What is the name of the Isle of Man's main airport?",
    options: ["Douglas International Airport", "Isle of Man Airport", "Ronaldsway Airport", "Manx Airport"],
    answer: 2
  },
  {
    q: "What are lawyers who have qualified in the Isle of Man called?",
    options: ["Solicitors", "Barristers", "Advocates", "Counsellors"],
    answer: 2
  },
  {
    q: "What are the Isle of Man's High Court judges known as?",
    options: ["High Justices", "Deemsters", "Sheriffs", "Stipendiaries"],
    answer: 1
  },
  {
    q: "How many people typically make up a jury in the Isle of Man's higher court (the Court of General Gaol Delivery)?",
    options: ["5", "7", "9", "12"],
    answer: 1
  },
  {
    q: "How many newspapers does the Isle of Man have?",
    options: ["2", "3", "4", "5"],
    answer: 1
  },
  {
    q: "What is the name of the free newspaper delivered to homes on the Isle of Man?",
    options: ["The Manx Independent", "The Isle of Man Examiner", "The Courier", "The Manx Tribune"],
    answer: 2
  },
  {
    q: "How many radio stations does the Isle of Man have?",
    options: ["2", "3", "4", "5"],
    answer: 1
  },
  {
    q: "Where is Central Government Office located?",
    options: ["Victoria Road, Douglas", "Bucks Road, Douglas", "Strand Street, Douglas", "Peel Road, Douglas"],
    answer: 1
  },
  {
    q: "Which Act requires anyone who is not an 'Isle of Man worker' to have a work permit?",
    options: ["Immigration Act", "Employment Rights Act", "Control of Employment Act", "Work Permits Act"],
    answer: 2
  },
  {
    q: "What is Tynwald – the oldest continuous parliament in the world – said to originate from in Norse?",
    options: ["thing-vollr (a field of assembly)", "ting-wald (a forest meeting)", "vaer-thing (a sea gathering)", "alt-thing (a high assembly)"],
    answer: 0
  },
  {
    q: "Which organisation is the statutory agency responsible for caring for archaeological monuments and managing the National Museum on the Isle of Man?",
    options: ["Culture Vannin", "Isle of Man Arts Council", "Manx National Heritage", "Department for Enterprise"],
    answer: 2
  },
  {
    q: "The Gaiety Theatre in Douglas was designed by which renowned theatre architect and opened in which year?",
    options: ["Edwin Lutyens, 1895", "Frank Matcham, 1900", "Charles Barry, 1905", "Augustus Pugin, 1910"],
    answer: 1
  },
  {
    q: "What does the 'Manx state pension' (introduced for people reaching state pension age after 6 April 2019) depend on?",
    options: ["National Insurance contributions paid in the UK only", "National Insurance contributions paid in the Island only", "A combination of UK and Manx contributions", "Years of Island residency only"],
    answer: 1
  },
  {
    q: "What is the Isle of Man's relationship with the European Union based on following Brexit?",
    options: ["Protocol 3 of the UK Act of Accession", "The European Economic Area Agreement", "The Trade and Co-operation Agreement between UK and EU", "A bespoke Isle of Man–EU agreement"],
    answer: 2
  },
  {
    q: "What year did the Manx Language Society (Yn Cheshaght Ghailckagh) form?",
    options: ["1879", "1889", "1899", "1909"],
    answer: 2
  },
  {
    q: "How are Isle of Man passports issued and by whom?",
    options: ["By the Isle of Man as an independent issuing state", "By the Lieutenant-Governor exercising the Royal Prerogative, as British passports", "By the UK Home Office specifically for IoM residents", "By the EU on behalf of the Island"],
    answer: 1
  },
  {
    q: "From what age can you obtain a provisional driving licence for cars and learner motorbikes on the Isle of Man?",
    options: ["15", "16", "17", "18"],
    answer: 1
  },
  {
    q: "Are vehicles registered on the Isle of Man required to have an MoT?",
    options: ["Yes, annually", "Yes, every two years", "No, but they must be fit for purpose", "No, there are no roadworthiness requirements"],
    answer: 2
  },
  {
    q: "Who supplies mains water and sewerage services on the Isle of Man?",
    options: ["Isle of Man Water Authority", "Manx Gas", "Manx Utilities", "Department of Infrastructure"],
    answer: 2
  },
  {
    q: "The Commonwealth Youth Games were hosted on the Isle of Man in which year?",
    options: ["2007", "2009", "2011", "2013"],
    answer: 2
  },
  {
    q: "How many students typically start the annual Parish Walk, and how many typically finish within the 24-hour time limit?",
    options: ["500 start, 100 finish", "750 start, 125 finish", "1,000 start, 150 finish", "1,500 start, 200 finish"],
    answer: 2
  },
  {
    q: "Under what special European arrangement did the Isle of Man previously have a relationship with the EU (before Brexit)?",
    options: ["The Schengen Agreement", "Protocol 3 to the UK's Act of Accession", "The European Economic Area Agreement", "Article 50 of the Treaty of Lisbon"],
    answer: 1
  },
  {
    q: "Which Manx Gaelic phrase means 'Good morning'?",
    options: ["Fastyr mie", "Oie vie", "Moghrey mie", "Braew"],
    answer: 2
  },
  {
    q: "What does the Manx phrase 'Traa dy liooar' mean?",
    options: ["Good night", "See you", "Thank you", "Time enough"],
    answer: 3
  },
  {
    q: "In which area of the Island is the Bunscoill Ghaelgagh primary school (where Manx medium education is provided) located?",
    options: ["Douglas", "Peel", "St Johns", "Ramsey"],
    answer: 2
  },
  {
    q: "Which Celtic language family does Manx Gaelic belong to?",
    options: ["Brythonic (alongside Welsh and Cornish)", "Goidelic (alongside Irish and Scottish Gaelic)", "Both Goidelic and Brythonic equally", "Neither – it is a separate branch"],
    answer: 1
  },
  {
    q: "How many years of National Insurance contributions in the Isle of Man qualify you for the Manx supplement on top of the basic Manx pension?",
    options: ["5 years", "10 years", "15 years", "20 years"],
    answer: 1
  },
  {
    q: "How long must a student have resided on the Isle of Man before starting a course to be eligible for the Department of Education's contribution towards university tuition fees?",
    options: ["2 years", "3 years", "4 years", "5 years"],
    answer: 2
  },
  {
    q: "Where is the Isle of Man Constabulary Headquarters located?",
    options: ["Strand Street, Douglas", "Bucks Road, Douglas", "Glencrutchery Road, Douglas", "Victoria Road, Douglas"],
    answer: 2
  },
  {
    q: "Approximately how many Police Officers make up the Isle of Man Constabulary?",
    options: ["132", "182", "232", "282"],
    answer: 2
  },
  {
    q: "Which department of the Isle of Man Government is responsible for the emergency services?",
    options: ["Department of Infrastructure", "Department of Home Affairs", "Department of Education, Sport and Culture", "Department of Health and Social Care"],
    answer: 1
  }
];

// Shuffle array using Fisher-Yates
function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

let questions = [];
let currentIndex = 0;
let score = 0;
let answered = false;

function startQuiz() {
  questions = shuffle(ALL_QUESTIONS).slice(0, 50);
  currentIndex = 0;
  score = 0;
  answered = false;
  document.getElementById('start-screen').style.display = 'none';
  document.getElementById('results').style.display = 'none';
  document.getElementById('quiz').style.display = 'block';
  loadQuestion();
}

function loadQuestion() {
  answered = false;
  const q = questions[currentIndex];
  const total = questions.length;

  document.getElementById('q-counter').textContent = `Question ${currentIndex + 1} of ${total}`;
  document.getElementById('score-live').textContent = score;
  document.getElementById('progress').style.width = `${(currentIndex / total) * 100}%`;
  document.getElementById('q-text').textContent = q.q;

  const feedback = document.getElementById('feedback');
  feedback.className = 'feedback';
  feedback.textContent = '';

  const btnNext = document.getElementById('btn-next');
  btnNext.style.display = 'none';
  btnNext.textContent = currentIndex < questions.length - 1 ? 'Next →' : 'See Results';

  const letters = ['A', 'B', 'C', 'D'];
  const optionsDiv = document.getElementById('options');
  optionsDiv.innerHTML = '';

  q.options.forEach((opt, i) => {
    const btn = document.createElement('button');
    btn.className = 'option-btn';
    btn.innerHTML = `<span class="letter">${letters[i]}</span>${opt}`;
    btn.onclick = () => selectAnswer(i, q.answer);
    optionsDiv.appendChild(btn);
  });
}

function selectAnswer(selected, correct) {
  if (answered) return;
  answered = true;

  const buttons = document.querySelectorAll('.option-btn');
  buttons.forEach(b => b.disabled = true);

  const feedback = document.getElementById('feedback');

  if (selected === correct) {
    score++;
    buttons[selected].classList.add('correct');
    feedback.className = 'feedback correct';
    feedback.textContent = '✓ Correct!';
  } else {
    buttons[selected].classList.add('wrong');
    buttons[correct].classList.add('correct');
    feedback.className = 'feedback wrong';
    feedback.textContent = `✗ Incorrect. The correct answer was: ${questions[currentIndex].options[correct]}`;
  }

  document.getElementById('score-live').textContent = score;
  document.getElementById('btn-next').style.display = 'inline-block';
}

function nextQuestion() {
  currentIndex++;
  if (currentIndex >= questions.length) {
    showResults();
  } else {
    loadQuestion();
  }
}

function showResults() {
  document.getElementById('quiz').style.display = 'none';
  document.getElementById('progress').style.width = '100%';

  const pct = Math.round((score / questions.length) * 100);
  document.getElementById('final-score').textContent = score;
  document.getElementById('res-correct').textContent = score;
  document.getElementById('res-wrong').textContent = questions.length - score;
  document.getElementById('res-pct').textContent = pct + '%';

  const band = document.getElementById('grade-band');
  if (pct >= 80) {
    band.className = 'grade-band grade-distinction';
    band.textContent = 'Distinction – Excellent!';
  } else if (pct >= 75) {
    band.className = 'grade-band grade-pass';
    band.textContent = 'Pass – Well Done!';
  } else {
    band.className = 'grade-band grade-fail';
    band.textContent = 'Keep Studying – You Can Do It!';
  }

  document.getElementById('results').style.display = 'block';
}

function restartQuiz() {
  startQuiz();
}
</script>
</body>
</html>
